<odoo>
    <template id="property_maintenance_external_layout_maint1">
        
        <!-- Multicompany -->
        
        <t t-if="not o and doc">
            <t t-set="o" t-value="doc" />
        </t>
        <t t-if="o and 'company_id' in o">
            <t t-set="company" t-value="o.company_id"></t>
        </t>
        <t t-if="not o or not 'company_id' in o">
            <t t-set="company" t-value="res_company"></t>
        </t>
        <t t-call="property_maintenance.external_layout_header_maint" />
        <t t-raw="0" />
        <t t-call="property_maintenance.external_layout_footer_maint" />
    </template>

    <template id="external_layout_header_maint">
        <div class="header">
            <div class="row">
                <div class="col-xs-3">
                    <img t-if="res_company.logo" t-att-src="'data:image/png;base64,%s' % res_company.logo"
                        style="max-height: 45px;" />
                </div>
                <div class="col-xs-9 text-right" style="margin-top:20px;"
                    t-field="res_company.name" />

            </div>
            <div class="row zero_min_height">
                <div class="col-xs-12">
                    <div style="border-bottom: 1px solid black;"></div>

                </div>
            </div>
        </div>
    </template>

<template id="external_layout_footer_maint">
 <div class="footer">
    <div class="text-center" >
        <ul t-if="not res_company.custom_footer" class="list-inline" style="font-size:90%; list-style-type: none;">
                <!-- <li t-if="res_company.website and res_company.email or res_company.website and res_company.fax or res_company.website and res_company.phone"></li> -->
                <li t-if="res_company.website" class="fa fa-info-circle" aria-hidden="true">
                    <span t-field="res_company.website"/>
                </li>
                <li t-if="res_company.email" class="fa fa-envelope" aria-hidden="true">
                    <span t-field="res_company.email"/>
                </li>
                <li t-if="res_company.phone" class="fa fa-phone-square" aria-hidden="true">
                    <span t-field="res_company.phone"/>
                </li>
                <span>|</span> <li t-if="res_company.company_registry" aria-hidden="true">
                    <span t-field="res_company.company_registry"/>
                  </li>
                <span>|</span> <li t-if="res_company.street" aria-hidden="true">
                    <span t-field="res_company.street"/>
                </li>
                <span>|</span> PC.<li t-if="res_company.zip" aria-hidden="true">
                    <span t-field="res_company.zip"/>
                </li>
               <span>|</span><li t-if="res_company.city" aria-hidden="true">
                    <span t-field="res_company.city"/>
                </li>
               <span>|</span> Fax:<li t-if="res_company.fax" aria-hidden="true">
                    <span t-field="res_company.fax"/>
                </li>
            </ul>
           
            <t t-if="res_company.parent_id.custom_footer">
                <span t-raw="res_company.parent_id.rml_footer"/>
            </t>
            <ul class="list-inline">
                <li>Page:</li>
                <li><span class="page"/></li>
                <li>/</li>
                <li><span class="topage"/></li>
            </ul>
        </div>
    
    </div>     
</template>
    <template id="invoice_to_owner_report_template">
        <t t-call="report.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="property_maintenance.property_maintenance_external_layout_maint1">
                    <div class="page">
                        <div class="oe_structure" />
                        <div class="row">
                            <table class=" table " width="100%" style="border: 1px solid black;">
                                <tr>
                                    <th style="border-top: 1px solid;border-right:1px solid;" width="50%">FROM:</th>
                                    <th style="border-top: 1px solid; " width="50%">TO:</th>
                                </tr>

                                <td width="50%" style="border-top: 0px white;">
                                    <t t-if="o.company_id.parent_id">
                                    <address t-field="o.company_id.parent_id.partner_id"
                                             t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}' />
                                    </t>
                                    <t t-if="not o.company_id.parent_id">
                                    <address t-field="o.company_id.partner_id"
                                             t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}' />
                                    </t>
                                </td>
                                <td width="50%" style="border-left: 1px solid; border-top: 0px white;">
                                    <address t-field="o.company_id.partner_id"
                                             t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}' />
                                </td>
                            </table>
                            <div class="row mt16 mb16">
                                <div class="text-center">
                                    <strong>From:</strong>
                                    <span t-esc="data['start_date']"/>&#160;&#160;&#160;
                                    <strong>To:</strong>
                                    <span t-esc="data['end_date']"/>
                                </div>
                            </div>
                             <table class="table-condensed" width="100%">
                                <thead>
                                    <tr style="border: 1px solid black;">
                                        <th class="text-center" style="border: 1px solid black">Date</th>
                                        <th class="text-center" style="border: 1px solid black">Invoice#</th>
                                        <th class="text-center" style="border: 1px solid black">Description</th>
                                        <th class="text-center" style="border: 1px solid black">Source</th>
                                        <th class="text-center" style="border: 1px solid black">Property</th>
                                        <th class="text-center" style="border: 1px solid black">Tenant</th>
                                        <th class="text-center" style="border: 1px solid black">Amount</th>
                                    </tr>
                                  <!--   <tr>1</tr> -->
                                </thead>
                            <!-- <table class="table-condensed">
                                <thead>
                                <tr style="border: 1px solid black">
                                    <th class="text-center" style="border: 1px solid black">Date</th>
                                    <th class="text-center" style="border: 1px solid black">Invoice#</th>
                                    <th class="text-center" style="border: 1px solid black">Description</th>
                                    <th class="text-center" style="border: 1px solid black">Source</th>
                                    <th class="text-center" style="border: 1px solid black">Property</th>
                                    <th class="text-center" style="border: 1px solid black">Tenant</th>
                                    <th class="text-center" style="border: 1px solid black">Amount</th>
                                </tr>
                            </thead> -->
                            <!-- <tbody class=""> -->
                            <!-- <tr t-foreach="o.order_line.filtered(lambda line: line.account_analytic_id)" t-as="line"> -->

                                 <tr t-foreach='get_data' t-as='l' style='page-break-inside: avoid;border-top: 1px solid black'>
                                    <td class='text-left'>
                                        <span t-esc="l['date']"/>
                                    </td>
                                    <td class='text-center'>
                                        <span t-esc="l['invoice_num']"/>
                                    </td>
                                    <td class='text-center'>
                                        <span t-esc="l['desc']"/>
                                    </td>
                                    <td class='text-left'>
                                        <span t-esc="l['source']"/>
                                    </td>
                                    <td class='text-center'>
                                        <span t-esc="l['property']"/>
                                    </td>
                                    <td class='text-left'>
                                        <span t-esc="l['tenant']"/>
                                    </td>
                                    <td class='text-right'>
                                        <span t-esc="'%.3f'% l['amount']"/>
                                    </td>

                                </tr>
                            <!-- </tbody> -->
                            </table>
                            <br/>
                            <div class="col-xs-4 pull-right">
                                <table class="table table-condensed">
                                    <tr class="border-black">
                                        <td><strong>Total</strong></td>
                                        <td class="text-right">
                                            <strong><span t-esc="'%.3f'% get_total"/> <span t-esc='o.company_id.parent_id.currency_id.symbol'/></strong>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <!-- <div class="row"> -->
                        <!-- <table class=" table tabcenter-block " width="100%"
                            style="border: 1px solid black;">
                            <tr>
                                <th style="border-top: 1px solid;border-right:1px solid;" width="50%">From:</th>
                                <th style="border-top: 1px solid; " width="50%">To:</th>
                            </tr>

                            <td width="50%" style="border-top: 0px white;">
                                <address t-field="o.company_id.partner_id"
                                    t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}' />
                            </td>
                            <td width="50%" style="border-left: 1px solid; border-top: 0px white;">
                                <address t-field="o.partner_id"
                                    t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}' />
                            </td>
                        </table>
                        <h4>
                            <strong>
                                <span
                                    t-if="o.type == 'out_invoice' and (o.state == 'open' or o.state == 'paid')">Invoice</span>
                                <span t-if="o.type == 'out_invoice' and o.state == 'proforma2'">PRO-FORMA</span>
                                <span t-if="o.type == 'out_invoice' and o.state == 'draft'">Draft Invoice</span>
                                <span t-if="o.type == 'out_invoice' and o.state == 'cancel'">Cancelled Invoice</span>
                                <span t-if="o.type == 'out_refund'">Refund</span>
                                <span t-if="o.type == 'in_refund'">Vendor Refund</span>
                                <span t-if="o.type == 'in_invoice'">Vendor Bill</span>
                                <span t-field="o.number" />
                            </strong>
                        </h4>

                        <table class="table center-block" width="100%"
                            style="border: 1px solid black">
                            <tr style="text-align:right;border: 1px solid black">
                                <th style="border: 1px solid black" width="16%">Description</th>
                                <th style="border: 1px solid black" width="16%">Date</th>
                                <th style="border: 1px solid black" width="17%">Due Date</th>
                                <th style="border: 1px solid black" width="16%">Source</th>
                                <th style="border: 1px solid black" width="17%">Property</th>
                            </tr>
                            <tr style="text-align:right;border: 1px solid black">
                                <td class="text-right" style="border: 1px solid black" width="16%">
                                    <t t-if="o.name">
                                        <span t-field="o.name" />
                                    </t>
                                    <t t-if="not o.name">
                                        <span>-</span>
                                    </t>
                                </td>
                                <td class="text-right" style="border: 1px solid black" width="16%">
                                    <t t-if="o.date_invoice">
                                        <span t-esc="o.date_invoice" />
                                    </t>
                                    <t t-if="not o.date_invoice">
                                        <span>-</span>
                                    </t>
                                </td>
                                <td class="text-right" style="border: 1px solid black" width="16%">
                                    <t t-if="o.date_due">
                                        <span t-esc="o.date_due" />
                                    </t>
                                    <t t-if="not o.date_due">
                                        <span>-</span>
                                    </t>
                                </td>
                                <td class="text-right" style="border: 1px solid black" width="17%">
                                    <t t-if="o.origin">
                                        <span t-esc="o.origin" />
                                    </t>
                                    <t t-if="not o.origin">
                                        <span>-</span>
                                    </t>
                                </td>
                                <td class="text-right" style="border: 1px solid black" width="17%">
                                    <t t-if="o.property_id.name">
                                        <span t-esc="o.property_id.name" />
                                    </t>
                                </td>
                            </tr>
                        </table>

                        <table class="table table-condensed">
                            <thead>
                                <tr style="border: 1px solid black">
                                    <th style="border: 1px solid black">Description</th>
                                    <th class="hidden" style="border: 1px solid black">Source Document</th>
                                    <th class="text-right" style="border: 1px solid black">Quantity</th>
                                    <th class="text-right" style="border: 1px solid black">Unit Price</th>
                                    <th class="text-right" style="border: 1px solid black">Taxes</th>
                                    <th class="text-right" style="border: 1px solid black">Tax Excluded Price</th>
                                </tr>
                            </thead>
                            <tbody class="invoice_tbody">
                                <tr t-foreach="o.invoice_line_ids" t-as="l">
                                    <td>
                                        <span t-esc="l.name" />
                                    </td>
                                    <td class="hidden">
                                        <span t-esc="l.origin" />
                                    </td>
                                    <td class="text-right">
                                        <span t-esc="l.quantity" />
                                    </td>
                                    <td class="text-right">
                                        <span t-esc="l.price_unit" />
                                    </td>

                                    <td class="text-right">
                                        <span
                                            t-esc="', '.join(map(lambda x: (x.description or x.name), l.invoice_line_tax_ids))" />
                                    </td>
                                    <td class="text-right">
                                        <span t-esc="l.price_subtotal" />
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="row">
                            <div class="col-xs-4 pull-right">
                                <table class="table table-condensed">
                                    <tr class="border-black">
                                        <td>
                                            <strong>Subtotal</strong>
                                        </td>
                                        <td class="text-right">
                                            <span t-field="o.amount_untaxed"
                                                t-options='{"widget": "monetary", "display_currency": o.currency_id}' />
                                        </td>
                                    </tr>
                                    <t t-foreach="o._get_tax_amount_by_group()" t-as="amount_by_group">
                                        <tr>
                                            <td>
                                                <span
                                                    t-esc="amount_by_group[0] if len(o.tax_line_ids) > 1 else (o.tax_line_ids.tax_id.description or o.tax_line_ids.tax_id.name)" />
                                            </td>
                                            <td class="text-right">
                                                <span t-esc="amount_by_group[1]"
                                                    t-options='{"widget": "monetary", "display_currency": o.currency_id}' />
                                            </td>
                                        </tr>
                                    </t>
                                    <tr class="border-black">
                                        <td>
                                            <strong>Total</strong>
                                        </td>
                                        <td class="text-right">
                                            <span t-field="o.amount_total"
                                                t-options='{"widget": "monetary", "display_currency": o.currency_id}' />
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>

               
                        <div class="row" t-if="len(o.tax_line_ids) > 0">
                            <div class="col-xs-6">
                                <table class="table table-condensed">
                                    <thead>
                                        <tr>
                                            <th>Tax</th>
                                            <th class="text-right">Base</th>
                                            <th class="text-right">Amount</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr t-foreach="o.tax_line_ids" t-as="t">
                                            <td>
                                                <span t-field="t.tax_id.description" />
                                            </td>
                                            <td class="text-right">
                                                <span t-field="t.base"
                                                    t-options='{"widget": "monetary", "display_currency": o.currency_id}' />
                                            </td>
                                            <td class="text-right">
                                                <span t-field="t.amount"
                                                    t-options='{"widget": "monetary", "display_currency": o.currency_id}' />
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <p t-if="o.comment">
                            <strong>Comment:</strong>
                            <span t-field="o.comment" />
                        </p>
                        <p t-if="o.payment_term_id">
                            <span t-field="o.payment_term_id.note" />
                        </p>
                        <p t-if="o.fiscal_position_id.note">
                            <strong>Fiscal Position Remark:</strong>
                            <span t-field="o.fiscal_position_id.note" />
                        </p>-->
                    </div>
                </t>
            </t>
        </t>
    </template>
    
</odoo>
